---
title: Route configuration
description: Complete field reference for app/routes/*/config.terse route definition files.
icon: "route"
---

Each `app/routes/*/config.terse` defines one MCP tool — its execution strategy, inputs, outputs, scripts, authentication, and caching behavior.

## Full schema

```yaml app/routes/get-user-profile/config.terse
name: get-user-profile
description: "Retrieve a user profile by primary key"
use: primary-db
statement: |
  SELECT id, name, email, created_at
  FROM users
  WHERE id = {{ inputs.user_id }}
inputs:
  user_id:
    type: int
    description: "User primary key"
data:
  id:
    type: int
  name:
    type: string
  email:
    type: string
  created_at:
    type: datetime
scripts:
  input_transform: "./validate-input.ts"
  output_transform: "./format-output.ts"
auth:
  plugin: api_key
  policy:
    value: "{{ env.API_KEY }}"
cache:
  enabled: true
  ttl: 120
```


## Field reference

<ParamField body="name" type="string">
  MCP tool name. Must be unique across all routes.

  **Default:** directory name (e.g., `get-user` from `app/routes/get-user/`).
</ParamField>

<ParamField body="description" type="string">
  Human-readable tool description. Exposed in the `tools/list` MCP response. Strongly recommended for agent discoverability.
</ParamField>

<ParamField body="use" type="string | string[]">
  Adapter name(s) for statement execution. References adapter identifiers defined in `app/adapters/`.

  <Warning>
  Required if `scripts.handler` is not set. A route must have either `use` or `scripts.handler` (or both).
  </Warning>
</ParamField>

<ParamField body="statement" type="string">
  SQL query or database command. Supports `{{ env.VAR }}` and `{{ inputs.field }}` placeholders. Use YAML multiline syntax (`|`) for readability.

  ```yaml
  statement: |
    SELECT id, name, email
    FROM users
    WHERE id = {{ inputs.user_id }}
  ```
</ParamField>

<ParamField body="inputs" type="object">
  Map of input parameter definitions. Each key becomes a named parameter in the MCP tool's input schema.

  <Expandable title="input field properties">
    <ParamField body="type" type="string" required>
      Input data type. Allowed values: `string`, `int`, `float`, `boolean`, `datetime`.
    </ParamField>

    <ParamField body="description" type="string">
      Human-readable description. Exposed in the MCP input schema for agent consumption.
    </ParamField>

    <ParamField body="optional" type="boolean" default="false">
      Whether the input can be omitted by the caller.
    </ParamField>

    <ParamField body="default" type="string">
      Default value when the caller omits this input. Always a string; converted to the declared type at runtime.
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="data" type="object">
  Map of output field definitions. Metadata only — does not enforce runtime validation.

  <Expandable title="data field properties">
    <ParamField body="type" type="string" required>
      Expected output data type.
    </ParamField>

    <ParamField body="description" type="string">
      Human-readable field description.
    </ParamField>

    <ParamField body="optional" type="boolean" default="false">
      Whether the field may be absent in the response.
    </ParamField>

    <ParamField body="map_to" type="string">
      Source column name if different from the key. Use when your database column name does not match the desired output field name.
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="scripts" type="object">
  Script paths for custom logic. All paths are relative to the route directory.

  <Expandable title="properties">
    <ParamField body="handler" type="string">
      Handler script path. When set, replaces database execution entirely. The handler receives inputs and returns results directly.
    </ParamField>

    <ParamField body="input_transform" type="string">
      Input transform script path. Runs before statement execution. Receives raw inputs and returns modified inputs.
    </ParamField>

    <ParamField body="output_transform" type="string">
      Output transform script path. Runs after statement execution. Receives raw results and returns modified results.
    </ParamField>
  </Expandable>

  <Tip>
  If scripts are omitted, convention-based discovery applies — see [Scripts](/concepts/scripts).
  </Tip>
</ParamField>

<ParamField body="auth" type="object">
  Route-level authentication. Omitting this block entirely makes the route unauthenticated.

  <Expandable title="properties">
    <ParamField body="plugin" type="string" required>
      Registered auth plugin name. Built-in plugins: `allow_all`, `api_key`.
    </ParamField>

    <ParamField body="policy" type="object">
      Plugin-specific parameters. For `api_key`, set `value` to the expected key or an `{{ env.VAR }}` reference.

      ```yaml
      auth:
        plugin: api_key
        policy:
          value: "{{ env.API_KEY }}"
      ```
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="cache" type="object">
  Per-route cache settings. Overrides the global cache configuration from `.hyperterse`.

  <Expandable title="properties">
    <ParamField body="enabled" type="boolean">
      Whether caching is active for this route. Inherits from `server.queries.cache.enabled` if not set.
    </ParamField>

    <ParamField body="ttl" type="integer">
      Cache TTL in seconds for this route. Inherits from `server.queries.cache.ttl` if not set.
    </ParamField>
  </Expandable>
</ParamField>


## Validity rules

A route is valid when at least one of these conditions is met:

1. `use` is defined (database-backed route).
2. `scripts.handler` is defined (script-backed route).

<Warning>
Routes with neither `use` nor `scripts.handler` are rejected during validation.
</Warning>


## JSON Schema

Editor validation: `schema/route.terse.schema.json`. Associate with `**/routes/**/config.terse`. See [Configuration schemas](/reference/configuration-schemas).
