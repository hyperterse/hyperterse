---
title: Docker
description: Deploy Hyperterse using Docker containers.
---

import Aside from '@/components/admonition.astro'
import { Steps } from '@astrojs/starlight/components'

Since Hyperterse is a standalone binary, you can run it in a Docker container. There are no external dependencies required.

<Aside
  type="caution"
  title="CAUTION"
>
  These instructions are a work in progress. Please report any issues or
  suggestions to the [GitHub
  repository](https://github.com/hyperterse/hyperterse/issues/new?template=documentation.yml).
</Aside>

## Dockerfile

<Steps>

1. **Export bundle**

   ```bash
   hyperterse export -f my-query-gateway.terse -o dist
   ```

2. **Create `dockerfile`**

   ```dockerfile title="Dockerfile"
   FROM alpine:3.19

   # Install bash and ca-certificates for HTTPS database connections
   RUN apk --no-cache add bash ca-certificates

   WORKDIR /app

   # Copy exported bundle
   COPY dist/my-query-gateway /app/my-query-gateway

   # Make script executable
   RUN chmod +x /app/my-query-gateway

   EXPOSE 8080

   CMD ["/app/my-query-gateway"]
   ```

3. **Build image**

   ```bash
   docker build -t my-query-gateway-app .
   ```

4. **Run container**

   ```bash
   docker run -d \
     -p 8080:8080 \
     -e DATABASE_URL="postgresql://user:pass@host:5432/db" \
     --name hyperterse \
     my-query-gateway-app
   ```

</Steps>

## Docker Compose

<Steps>

1. **Create `docker-compose.yml`**

   ```yaml title="docker-compose.yml"
   version: '3.8'


    services:
      my-query-gateway:
        build: .
        ports: - '8080:8080'
        environment: - DATABASE_URL=postgresql://user:pass@localhost:5432/app
        depends_on: - postgres
        restart: unless-stopped

    # For local development with database
    postgres:
        image: postgres:16
        environment: - POSTGRES_USER=user - POSTGRES_PASSWORD=pass - POSTGRES_DB=app
        volumes: - postgres_data:/var/lib/postgresql/data
        ports: - '5432:5432'

    volumes:
      postgres_data:
   ```

2. **Start services**

   ```bash
   docker-compose up -d
   ```

</Steps>

## Environment variables

Pass credentials via environment:

```bash
docker run -d \
  -p 8080:8080 \
  -e DATABASE_URL="${DATABASE_URL}" \
  -e REDIS_URL="${REDIS_URL}" \
  my-query-gateway-app
```

Or use `.env` file:

```bash
docker run -d \
  -p 8080:8080 \
  --env-file .env.production \
  my-query-gateway-app
```

## Health checks

```dockerfile
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD wget --no-verbose --tries=1 --spider http://localhost:8080/heartbeat || exit 1
```

Note: If using Alpine, install `wget` or use `curl` instead:

```dockerfile
RUN apk --no-cache add bash ca-certificates wget
# or
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:8080/heartbeat || exit 1
```
