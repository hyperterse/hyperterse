---
title: Docker
description: Deploy Hyperterse using Docker containers.
---

import Aside from '@/components/admonition.astro'

<Aside>**First**: Run `hyperterse export` to create a deployment bundle.</Aside>

## Quick start

### Step 1: Export your configuration

```bash
hyperterse export -f config.terse -o dist
```

### Step 2: Create dockerfile

```dockerfile title="Dockerfile"
FROM alpine:3.19

# Install ca-certificates for HTTPS database connections
RUN apk --no-cache add ca-certificates

WORKDIR /app

# Copy exported bundle
COPY dist/hyperterse /app/hyperterse
COPY dist/config.terse /app/config.terse

# Make script executable
RUN chmod +x /app/hyperterse

EXPOSE 8080

CMD ["/app/hyperterse", "run", "-f", "/app/config.terse"]
```

### Step 3: Build image

```bash
docker build -t hyperterse-app .
```

### Step 4: Run container

```bash
docker run -d \
  -p 8080:8080 \
  -e DATABASE_URL="postgresql://user:pass@host:5432/db" \
  --name hyperterse \
  hyperterse-app
```

## Docker compose

For local development with database:

```yaml title="docker-compose.yml"
version: '3.8'

services:
  hyperterse:
    build: .
    ports:
      - '8080:8080'
    environment:
      - DATABASE_URL=postgresql://app:app@postgres:5432/myapp
    depends_on:
      - postgres
    restart: unless-stopped

  postgres:
    image: postgres:16
    environment:
      - POSTGRES_USER=app
      - POSTGRES_PASSWORD=app
      - POSTGRES_DB=myapp
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - '5432:5432'

volumes:
  postgres_data:
```

Run:

```bash
docker-compose up -d
```

## Multi-stage build

For smaller images:

```dockerfile title="Dockerfile"
# Build stage (if building from source)
FROM golang:1.25-alpine AS builder
WORKDIR /src
COPY . .
RUN make build

# Production stage
FROM alpine:3.19
RUN apk --no-cache add ca-certificates
WORKDIR /app
COPY --from=builder /src/dist/hyperterse /app/hyperterse
COPY config.terse /app/config.terse
RUN chmod +x /app/hyperterse
EXPOSE 8080
CMD ["/app/hyperterse", "run", "-f", "/app/config.terse"]
```

## Environment variables

Pass credentials via environment:

```bash
docker run -d \
  -p 8080:8080 \
  -e DATABASE_URL="${DATABASE_URL}" \
  -e REDIS_URL="${REDIS_URL}" \
  hyperterse-app
```

Or use env file:

```bash
docker run -d \
  -p 8080:8080 \
  --env-file .env.production \
  hyperterse-app
```

## Health checks

```dockerfile
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD wget --no-verbose --tries=1 --spider http://localhost:8080/docs || exit 1
```

## Production tips

### Use Read-Only root filesystem

```bash
docker run -d \
  --read-only \
  --tmpfs /tmp \
  -p 8080:8080 \
  hyperterse-app
```

### Resource limits

```bash
docker run -d \
  --memory=512m \
  --cpus=1 \
  -p 8080:8080 \
  hyperterse-app
```

### Non-root user

```dockerfile
FROM alpine:3.19
RUN apk --no-cache add ca-certificates
RUN addgroup -S app && adduser -S app -G app
WORKDIR /app
COPY --chown=app:app dist/hyperterse /app/hyperterse
COPY --chown=app:app config.terse /app/config.terse
RUN chmod +x /app/hyperterse
USER app
EXPOSE 8080
CMD ["/app/hyperterse", "run", "-f", "/app/config.terse"]
```

## Logging

View container logs:

```bash
docker logs -f hyperterse
```

For production, use logging drivers:

```bash
docker run -d \
  --log-driver=json-file \
  --log-opt max-size=10m \
  --log-opt max-file=3 \
  hyperterse-app
```
