---
title: MySQL
description: Configure and use MySQL with Hyperterse.
sidebar:
  order: 3
---

import Aside from '@/components/admonition.astro'

MySQL is fully supported in Hyperterse with connection pooling, character set configuration, and all standard SQL features.

## Connection string

```yaml
adapters:
  my_mysql:
    connector: mysql
    connection_string: 'user:password@tcp(host:3306)/database'
```

### Format

```
[user]:[password]@tcp([host]:[port])/[database]?[params]
```

### Examples

```yaml
# Local development
connection_string: "root:password@tcp(localhost:3306)/myapp"

# With parameters
connection_string: "user:pass@tcp(host:3306)/db?charset=utf8mb4&parseTime=true"

# AWS RDS
connection_string: "admin:${DB_PASS}@tcp(mydb.abc123.us-east-1.rds.amazonaws.com:3306)/prod"

# Unix socket
connection_string: "user:pass@unix(/var/run/mysqld/mysqld.sock)/database"
```

## Adapter options

```yaml
adapters:
  production_db:
    connector: mysql
    connection_string: 'user:pass@tcp(host:3306)/db'
    options:
      max_connections: '10'
      charset: 'utf8mb4'
```

| Option            | Default   | Description                   |
| ----------------- | --------- | ----------------------------- |
| `max_connections` | `10`      | Maximum connections in pool   |
| `charset`         | `utf8mb4` | Character set for connections |

## Setup guide

### Step 1: Create your database

```sql
CREATE DATABASE myapp CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'hyperterse'@'%' IDENTIFIED BY 'secure_password';
GRANT SELECT ON myapp.* TO 'hyperterse'@'%';
FLUSH PRIVILEGES;
```

### Step 2: Configure Hyperterse

```yaml
adapters:
  main_db:
    connector: mysql
    connection_string: 'hyperterse:secure_password@tcp(localhost:3306)/myapp'
    options:
      charset: 'utf8mb4'
```

### Step 3: Test connection

```bash
hyperterse dev -f config.terse
```

Look for:

```
INFO  Connected to adapter: main_db
```

## Query examples

### Basic queries

```yaml
queries:
  list-products:
    use: main_db
    description: 'List all products'
    statement: |
      SELECT id, name, price, stock
      FROM products
      ORDER BY name ASC
      LIMIT 100
```

### Parameterized queries

```yaml
queries:
  get-product:
    use: main_db
    description: 'Get product by ID'
    statement: |
      SELECT id, name, price, description
      FROM products
      WHERE id = {{ inputs.productId }}
    inputs:
      productId:
        type: int
        description: 'Product ID'
```

### Like queries

```yaml
queries:
  search-products:
    use: main_db
    description: 'Search products by name'
    statement: |
      SELECT id, name, price
      FROM products
      WHERE name LIKE {{ inputs.searchTerm }}
      LIMIT 20
    inputs:
      searchTerm:
        type: string
        description: 'Search term (use % for wildcards)'
```

### Date queries

```yaml
queries:
  orders-by-date:
    use: main_db
    description: 'Get orders in date range'
    statement: |
      SELECT id, customer_id, total, created_at
      FROM orders
      WHERE created_at >= {{ inputs.startDate }}
        AND created_at <= {{ inputs.endDate }}
      ORDER BY created_at DESC
    inputs:
      startDate:
        type: datetime
      endDate:
        type: datetime
```

### Aggregations

```yaml
queries:
  sales-summary:
    use: main_db
    description: 'Daily sales summary'
    statement: |
      SELECT 
        DATE(created_at) as order_date,
        COUNT(*) as order_count,
        SUM(total) as total_sales
      FROM orders
      WHERE created_at >= {{ inputs.startDate }}
      GROUP BY DATE(created_at)
      ORDER BY order_date DESC
    inputs:
      startDate:
        type: datetime
```

### Joins

```yaml
queries:
  order-details:
    use: main_db
    description: 'Get order with customer details'
    statement: |
      SELECT 
        o.id, o.total, o.created_at,
        c.name as customer_name, c.email as customer_email
      FROM orders o
      JOIN customers c ON o.customer_id = c.id
      WHERE o.id = {{ inputs.orderId }}
    inputs:
      orderId:
        type: int
```

## Connection parameters

Add parameters to the connection string for fine-tuning:

```yaml
connection_string: 'user:pass@tcp(host:3306)/db?parseTime=true&loc=UTC&timeout=10s'
```

| Parameter      | Description                             |
| -------------- | --------------------------------------- |
| `charset`      | Character set (e.g., `utf8mb4`)         |
| `parseTime`    | Parse `DATE`/`DATETIME` to Go time.Time |
| `loc`          | Timezone for time parsing               |
| `timeout`      | Connection timeout                      |
| `readTimeout`  | Read timeout                            |
| `writeTimeout` | Write timeout                           |

<Aside>
  Use `parseTime=true` if your queries return datetime columns and you want
  proper formatting.
</Aside>

## Performance tips

### Optimize queries

- Add indexes for frequently filtered columns
- Use `LIMIT` on list queries
- Specify columns instead of `SELECT *`

### Connection pooling

```yaml
options:
  max_connections: '20' # Adjust based on workload
```

## Common issues

### Access denied

Check user permissions:

```sql
SHOW GRANTS FOR 'hyperterse'@'%';

-- Grant if needed
GRANT SELECT ON myapp.* TO 'hyperterse'@'%';
```

### Character set issues

Ensure UTF-8 support:

```yaml
connection_string: 'user:pass@tcp(host:3306)/db?charset=utf8mb4'
```

### Connection timeout

Increase timeout in connection string:

```yaml
connection_string: 'user:pass@tcp(host:3306)/db?timeout=30s'
```
