{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/hyperterse/hyperterse/refs/heads/main/schema/root.terse.schema.json",
  "title": "HyperterseRootConfig",
  "description": "Schema for root project configuration files (`.hyperterse`) that define project-level settings.",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Project name.",
      "pattern": "^[a-z][a-z0-9_-]*$",
      "minLength": 1
    },
    "version": {
      "type": "string",
      "description": "Optional project version for observability metadata.",
      "minLength": 1
    },
    "root": {
      "type": "string",
      "description": "Base directory for discovery (defaults to `app`).",
      "minLength": 1
    },
    "build": {
      "type": "object",
      "description": "Optional build configuration.",
      "properties": {
        "out": {
          "type": "string",
          "description": "Build output directory.",
          "minLength": 1
        },
        "out_dir": {
          "type": "string",
          "description": "Alias for build.out.",
          "minLength": 1
        },
        "clean_dir": {
          "type": "boolean",
          "description": "Clean output directory before build."
        }
      },
      "additionalProperties": false
    },
    "tools": {
      "type": "object",
      "description": "Tool discovery and global tool cache settings.",
      "properties": {
        "directory": {
          "type": "string",
          "description": "Tools directory relative to `root` (defaults to `tools`).",
          "minLength": 1
        },
        "cache": {
          "type": "object",
          "description": "Global/default tool cache configuration.",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "ttl": {
              "type": "integer",
              "minimum": 1
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "adapters": {
      "type": "object",
      "description": "Adapter discovery settings.",
      "properties": {
        "directory": {
          "type": "string",
          "description": "Adapters directory relative to `root` (defaults to `adapters`).",
          "minLength": 1
        }
      },
      "additionalProperties": false
    },
    "server": {
      "type": "object",
      "description": "Runtime server configuration.",
      "properties": {
        "port": {
          "description": "Server port (default: 8080).",
          "oneOf": [
            {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535
            },
            {
              "type": "string",
              "pattern": "^[0-9]{1,5}$"
            }
          ]
        },
        "log_level": {
          "type": "integer",
          "description": "Log level: 1=ERROR, 2=WARN, 3=INFO, 4=DEBUG.",
          "minimum": 1,
          "maximum": 4
        }
      },
      "additionalProperties": false
    }
  },
  "required": [
    "name"
  ],
  "additionalProperties": false
}